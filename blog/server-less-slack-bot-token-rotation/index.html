

<!DOCTYPE html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="true"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Server-less Slack Bot Token Rotation &middot; h0wl</title>
    <meta name="title" content="Server-less Slack Bot Token Rotation &middot; h0wl" />
  
  <meta name="description" content="Just another programming and infosec blog" />
  
  
  
  <link rel="canonical" href="https://h0wlsec.github.io/blog/server-less-slack-bot-token-rotation/" />
  
  
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.ae3e6c7a87cd9576d9a87c9e9ccdfc0c6352786553d5ae9b0050847a942c7ff36e0b10ad14aed0c38605af06268c51bc2aa608d669672b4f25f423353f59540c.css"
    integrity="sha512-rj5seofNlXbZqHyenM38DGNSeGVT1a6bAFCEepQsf/NuCxCtFK7Qw4YFrwYmjFG8KqYI1mlnK08l9CM1P1lUDA=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js" integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1&#43;ko&#43;UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
  
    
    
    
  
  
    
    
  
  
  
    
    <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.b607eb5ea0f48ef635db6a1c024a35eeff4529157e49461941aac333a158a1f71cae4e530d45ac010598695f823dbe38a63142757e37c2d7b74a309d7296f681.js" integrity="sha512-tgfrXqD0jvY122ocAko17v9FKRV&#43;SUYZQarDM6FYofccrk5TDUWsAQWYaV&#43;CPb44pjFCdX43wte3SjCdcpb2gQ==" data-copy="Copy" data-copied="Copied"></script>
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Server-less Slack Bot Token Rotation" />
<meta property="og:description" content="Have you ever wanted to manually setup Slack bot token rotation with server-less infrastructure in AWS?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://h0wlsec.github.io/blog/server-less-slack-bot-token-rotation/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-08-30T05:27:55+00:00" />
<meta property="article:modified_time" content="2021-08-30T05:27:55+00:00" /><meta property="og:site_name" content="h0wl" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Server-less Slack Bot Token Rotation"/>
<meta name="twitter:description" content="Have you ever wanted to manually setup Slack bot token rotation with server-less infrastructure in AWS?"/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Blogs",
    "name": "Server-less Slack Bot Token Rotation",
    "headline": "Server-less Slack Bot Token Rotation",
    
    "abstract": "Have you ever wanted to manually setup Slack bot token rotation with server-less infrastructure in AWS?",
    "inLanguage": "en",
    "url" : "https:\/\/h0wlsec.github.io\/blog\/server-less-slack-bot-token-rotation\/",
    "author" : {
      "@type": "Person",
      "name": "Zach Howell"
    },
    "copyrightYear": "2021",
    "dateCreated": "2021-08-30T05:27:55\u002b00:00",
    "datePublished": "2021-08-30T05:27:55\u002b00:00",
    
    "dateModified": "2021-08-30T05:27:55\u002b00:00",
    
    "keywords": ["security","cloud","python","terraform","slack","aws"],
    
    "mainEntityOfPage": "true",
    "wordCount": "1583"
  }]
  </script>


  
  <meta name="author" content="Zach Howell" />
  
    
      <link href="https://github.com/h0wlsec" rel="me" />
    
      <link href="https://linkedin.com/in/zachhowell" rel="me" />
    
      <link href="https://twitter.com/HachZowell" rel="me" />
    
  
  
  






  
  
  
  


  
  
    <link rel="stylesheet" href="https://cdn.rawgit.com/lonekorean/gist-syntax-themes/d49b91b3/stylesheets/one-dark.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    .prose :where(tbody tr):not(:where([class~="not-prose"] *)) {
        border-bottom-width: 0px;
    }
</style>
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0"
        href="#main-content"
        ><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400"
          >&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold sm:py-10 text-neutral-900 dark:text-neutral print:hidden">
  <nav class="flex justify-between">
    
    <div>
      
        
          <a href="/">
            <img
              src="/logo-white.png"
              width="600"
              height="189"
              class="max-w-[10rem] max-h-[10rem] object-scale-down object-left"
              alt="h0wl"
            />
          </a>
        
      
      

    </div>
    
    
      <ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row">
        
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/blog/"
                title="Blogs"
                >Blog</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/about-me/"
                title="About Me"
                >About</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/tags/"
                title="Tags"
                >Tags</a
              >
            </li>
          
        
        
          <li class="ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
            <button
              id="search-button"
              class="text-base hover:text-primary-600 dark:hover:text-primary-400"
              title="Search (/)"
            >
              

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
          </li>
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >h0wl</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/blog/"
      >Blogs</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/blog/server-less-slack-bot-token-rotation/"
      >Server-less Slack Bot Token Rotation</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Server-less Slack Bot Token Rotation
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2021-08-30 05:27:55 &#43;0000 UTC">30 August 2021</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">8 mins</span>
    

    
    
  </div>

  
  
    <div class="my-1 text-xs text-neutral-500 dark:text-neutral-400 ">
      
        
      
        
          
            <a
              href="/tags/security/"
              class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >security</a
            >
          
            <a
              href="/tags/cloud/"
              class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >cloud</a
            >
          
            <a
              href="/tags/python/"
              class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >python</a
            >
          
            <a
              href="/tags/terraform/"
              class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >terraform</a
            >
          
            <a
              href="/tags/slack/"
              class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >slack</a
            >
          
            <a
              href="/tags/aws/"
              class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >aws</a
            >
          
        
      
    </div>
  


      </div>
    </header>
    <section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert">
      
        <div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last">
          <div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden">
            <details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700"
  >
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"
  >
    <nav id="TableOfContents">
  <ul>
    <li><a href="#aws-console-guide">AWS Console Guide</a>
      <ul>
        <li><a href="#secrets-manager">Secrets Manager</a></li>
        <li><a href="#lambda-function-layer">Lambda Function Layer</a></li>
        <li><a href="#main-lambda-function">Main Lambda Function</a></li>
        <li><a href="#cloudwatch-event-rule">CloudWatch event rule</a></li>
      </ul>
    </li>
    <li><a href="#slack-bot-rotation-lambda-function">Slack Bot Rotation Lambda Function</a>
      <ul>
        <li><a href="#slack-bot-rotationpy">slack-bot-rotation.py</a></li>
      </ul>
    </li>
    <li><a href="#cloudwatch-event-rule-lambda-function">CloudWatch Event Rule Lambda Function</a>
      <ul>
        <li><a href="#slack-bot-rotation-triggerpy">slack-bot-rotation-trigger.py</a></li>
      </ul>
    </li>
    <li><a href="#terraform">Terraform</a></li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-w-0 min-h-0 max-w-prose">
        <div class="!mb-9 text-xl lead">
  Have you ever wanted to manually setup Slack bot token rotation with server-less infrastructure in AWS?
</div>

<p>



  <figure>
    <img class="my-0 rounded-md" src="https://images.unsplash.com/photo-1557200134-3103da7b6bff?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDMxfHxzbGFjayUyMGJvdHxlbnwwfHx8fDE2MzAwNDAzOTA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000" alt="Slack interface" />
    <figcaption>Photo by <a href="https://unsplash.com/@hostreviews">Stephen Phillips - Hostreviews.co.uk</a> on <a href="https://unsplash.com/">Unsplash</a></figcaption>
  </figure>

</p>
<p>When you setup a new Slack bot, you have the option to configure it with <a href="https://api.slack.com/authentication/rotation">expiring tokens</a> used for communicating with Slack. This can be desirable if you do not want your Bot tokens to sit around aging and potentially leaking/getting compromised in some way. Slack recommends configuring this for &ldquo;developers building on or for security-minded organizations&rdquo;.</p>

  
  
  
  
  
  
    
    
      
    
    
      <figure >
        
          <img
            class="my-0 rounded-md"
            srcset="
            /blog/server-less-slack-bot-token-rotation/images/slack_recommendation_hud04fdf8f35d17e836340f8e60228b9fe_22849_330x0_resize_box_3.png 330w,
            /blog/server-less-slack-bot-token-rotation/images/slack_recommendation_hud04fdf8f35d17e836340f8e60228b9fe_22849_660x0_resize_box_3.png 660w,
            /blog/server-less-slack-bot-token-rotation/images/slack_recommendation_hud04fdf8f35d17e836340f8e60228b9fe_22849_1024x0_resize_box_3.png 1024w,
            /blog/server-less-slack-bot-token-rotation/images/slack_recommendation_hud04fdf8f35d17e836340f8e60228b9fe_22849_1320x0_resize_box_3.png 2x"
            src="/blog/server-less-slack-bot-token-rotation/images/slack_recommendation_hud04fdf8f35d17e836340f8e60228b9fe_22849_660x0_resize_box_3.png"
            alt=""
          />
        
        
      </figure>
    
  

<p>This generally provides an extra layer of security for your access tokens that can be used to do anything your Bot can do in any Slack instance it is installed.</p>
<p>Recently with the &ldquo;server-less&rdquo; Slack bot deployment I&rsquo;ve been working on, I found it difficult to find documentation online for standing up infrastructure in AWS that would refresh my bot token reliably before it expired. Slack&rsquo;s expiring tokens have a lifetime of 12 hours in which they need to be refreshed, but I found that freshing them slightly more often increased reliability of storing them in Secrets Manager.</p>
<p>I discovered my solution to this issue using a <a href="https://aws.amazon.com/blogs/security/how-to-rotate-your-twitter-api-key-and-bearer-token-automatically-with-aws-secrets-manager/">2018 article from AWS on rotating Twitter API keys</a> as my template. In this article, the author suggests using <a href="https://aws.amazon.com/secrets-manager/">AWS Secrets Manager</a> with a customized Lambda function that runs all the token refresh calls against Twitter&rsquo;s API to facilitate the rotation and to replace the stored secret in AWS. I made mine do the same against Slack&rsquo;s API.</p>
<p>However, Secrets Manager has a limitation in that you can only choose 1 day as the minimum rotation period for a secret (<a href="https://zaccharles.medium.com/how-secrets-manager-schedules-automatic-rotations-e9f5f50de8aa">and this 1 day rotation period can be as long as 48 hours if you&rsquo;re unlucky with the randomization</a>). I don&rsquo;t think AWS expected this tool to be used for things like API keys that require shorter-lived credentials. To get around this limitation, I thought to use a <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/Create-CloudWatch-Events-Scheduled-Rule.html"><em>scheduled</em>  <em>CloudWatch event rule</em></a> to trigger this rotation Lambda function within the 12 hour lifespan of the token. Conveniently, these CloudWatch event rules can be scheduled like a cron job on a Unix system.</p>
<p>In my deployment, I tried a few different intervals for freshing the token. Initially, I tested it for a couple weeks refreshing it every 10 minutes to simulate months of refresh cycles and it never got out of sync. In order to reduce the amount of time my Lambda functions were running, I extended my CloudWatch rule to run every 10 hours. With this single token refresh in the token lifetime, I did run into syncing issues where the token would expire if the refresh didn&rsquo;t go exactly right.</p>
<p>I ended up with a happy medium where the refresh happens every 4 hours (3 opportunities in the token&rsquo;s lifetime) and I have not had any syncing issues and use of expiring token has been stable.</p>
<p>Although the <a href="https://slack.dev/bolt-python/concepts">Bolt library</a> can help do this refresh process auto-magically, I&rsquo;ve found it beneficial to have full control over my tokens and to understand the mechanisms behind the secret update process in Secrets Manager. I&rsquo;ve also been trying to make my Lambda functions as lightweight and fast as possible, so I decided to stick with the Python <a href="https://slack.dev/python-slack-sdk/api-docs/slack_sdk/">slack_sdk</a> library rather than Bolt in the hopes that my functions will be faster and lighter.</p>
<p>This guide was written and created with Python version 3.8. If you are using a different version for your bot, you will need to change all version references to the version you are using.</p>
<hr>
<h2 id="aws-console-guide" class="relative group">AWS Console Guide <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#aws-console-guide" aria-label="Anchor">#</a></span></h2>
<h3 id="secrets-manager" class="relative group">Secrets Manager <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#secrets-manager" aria-label="Anchor">#</a></span></h3>
<p>First you will need to create the Slack bot secret in AWS Secrets Manager.</p>
<ol>
<li>Go to AWS Secrets Manager in your console and click &ldquo;Store a new secret&rdquo;.
<img src="images/secretsmanager1.png" width="800"/></li>
<li>Select &ldquo;Other type of secrets&rdquo; for the secret type and input your Slack secrets as shown below (you won&rsquo;t yet have a Slack refresh token if you haven&rsquo;t exchanged your non-expiring token for an expiring one).
<img src="images/secretsmanager2.png" width="600"/></li>
<li>Input the name of the secret <em>e.g. &ldquo;slack-bot-secrets&rdquo;</em>.
<img src="images/secretsmanager3.png" width="600"/></li>
<li>Automatic secret rotation will be disabled for now.
<img src="images/secretsmanager4.png" width="600"/></li>
<li>Scroll down and click &ldquo;Store&rdquo; on the last page after confirming all your configurations.
<img src="images/secretsmanager5.png" width="300"/></li>
<li>Click the created secret and note down the secret ARN. You will need it in later steps.
<img src="images/secretsmanager7.png" width="800"/></li>
</ol>
<h3 id="lambda-function-layer" class="relative group">Lambda Function Layer <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#lambda-function-layer" aria-label="Anchor">#</a></span></h3>
<p>Second, you will need the slack_sdk layer setup for the Lambda function. For my own deployment, I am using the slack_sdk library in multiple Lambda functions and the layer allows the dependency to easily be shared across multiple functions and allows for easier maintenance/troubleshooting.</p>
<ol>
<li>Create the required slack_sdk zip file for uploading to the Lambda Layer. Run the following commands (for Linux/Mac, they won&rsquo;t be very different on Windows with a similar zip utility):</li>
</ol>
<pre tabindex="0"><code>$ pip install --target ./python/lib/python3.8/site-packages slack_sdk
$ zip -r slack_sdk.zip python
</code></pre><ol start="2">
<li>Within the AWS Lambda service in your AWS console, go to <em>Layers</em> on the left hand side and click &ldquo;Create Layer&rdquo;.
<img src="images/createlayer1.png" width="800"/></li>
<li>Enter the name &ldquo;slack_sdk&rdquo; for the layer, upload the zip created in step 1, select Python 3.8 for the compatible runtime, and click &ldquo;Create&rdquo;.
<img src="images/createlayer2.png" width="600"/></li>
<li>This Layer will now be available for any Lambda function that needs it.
<img src="images/createlayer3.png" width="800"/></li>
</ol>
<h3 id="main-lambda-function" class="relative group">Main Lambda Function <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#main-lambda-function" aria-label="Anchor">#</a></span></h3>
<p>Third, you need to create the Lambda functions that will be doing the Slack bot token rotation.</p>
<ol>
<li>You  need to setup your first Lambda function for doing the rotation - <em>slack-bot-rotation.py</em> below has the code that will be used by Secrets Manager to rotate the token. Make sure &ldquo;Create a new role with basic Lambda permissions&rdquo; is selected.
<img src="images/create_lambda1-1.png" width="800"/></li>
<li>Paste in the code from <em>slack-bot-rotation.py</em> and click <em>deploy</em>.
<img src="images/create_lambda2-1.png" width="800"/></li>
<li>In the same <em>Code</em> tab of the Lambda function, scroll down to the bottom to add the layer you created in the second phase.
<img src="images/create_lambda2.1.png" width="650"/></li>
<li>Select Custom layers and select the <em>slack_sdk</em> layer from the dropdown, along with the version. Click &ldquo;Add&rdquo; to add it to the Lambda function.
<img src="images/create_lambda2.2.png" width="500"/></li>
<li>After you&rsquo;ve confirmed the layer has been added, go back to the Lambda settings. Click on <em>Configuration</em> -&gt; <em>Permissions</em> and click the role that was created with the Lambda function.
<img src="images/create_lambda3.png" width="600"/></li>
<li>You will be brought to the role in the IAM interface. Click &ldquo;Attach policies&rdquo;.
<img src="images/create_lambda4-2.png" width="700"/></li>
<li>A custom policy to allow the Lambda to rotate the secret is required. Click &ldquo;Create policy&rdquo;.
<img src="images/createlambda5-1.png" width="600"/></li>
<li>Click the JSON tab to enter the custom policy.
<img src="images/createlambda6-1.png" width="800"/>
This is the JSON to copy into the policy with <strong>your secret ARN</strong> from phase 1:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowLambdaToStoreAndRetrieveSecret&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;secretsmanager:DescribeSecret&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;secretsmanager:GetSecretValue&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;secretsmanager:PutSecretValue&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;secretsmanager:UpdateSecretVersionStage&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;your-secret-arn&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowLambdaToListAllSecrets&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;secretsmanager:ListSecrets&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ol start="9">
<li>Enter the name and click &ldquo;Create policy&rdquo;.
<img src="images/createlambda7.png" width="800"/></li>
<li>Go back to your IAM role tab with the Lambda role and refresh. You should now be able to attach the created policy by searching for &ldquo;slack&rdquo; in the attach policy page.
<img src="images/createlambda10.png" width="700"/></li>
<li>Now go back to your Lambda function tab and refresh to confirm the function now has access to the secret create in phase 1.
<img src="images/createlambda11-1.png" width="800"/></li>
<li>You will now need to allow Secrets Manager service to invoke this function on its own. Under <em>Configuration</em> -&gt; <em>Permissions</em>, go to the &ldquo;Resource-based policy&rdquo; section and click &ldquo;Add permissions&rdquo;.
<img src="images/createlambda12.png" width="800"/></li>
<li>In the policy statement select &ldquo;AWS Service&rdquo; and then Secrets Manager from the dropdown. Then choose &ldquo;lambda:InvokeFunction&rdquo; as the Action and give it a Statement ID.
<img src="images/createlambda13.png" width="600"/></li>
</ol>
<p>Your rotation Lambda function is now ready to be added Secrets Manager for automatic rotation.</p>
<h3 id="cloudwatch-event-rule" class="relative group">CloudWatch event rule <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#cloudwatch-event-rule" aria-label="Anchor">#</a></span></h3>
<p>Fourth, the CloudWatch event rule needs to be created for rotating the Slack bot secret more often than every day.</p>
<ol>
<li>First the Lambda function used by the CloudWatch rule needs to be created. Go to the Lambda service in your console and click &ldquo;Create function&rdquo; again.
<img src="images/cloudwatchrule0.1.png" width="800"/></li>
<li>Name the function and click &ldquo;Create function&rdquo;.
<img src="images/cloudwatchrule0.2.png" width="800"/></li>
<li>Paste in the <em>slack-bot-rotation-trigger.py</em> code from below and click &ldquo;Deploy&rdquo;.
<img src="images/cloudwatchrule0.3-1.png" width="700"/></li>
<li>Again we need to edit the created Lambda function role to include the ability to interact with our secret. Click the role under <em>Configuration</em> -&gt; <em>Permissions</em>.
<img src="images/cloudwatchrule0.4.png" width="600"/></li>
<li>Attach and create a policy with the following JSON with ** your secret ARN**:
<img src="images/cloudwatchrule0.5-1.png" width="700"/></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowLambdaToRotateSecret&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;secretsmanager:RotateSecret&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;your-secret-arn&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowLambdaToListAllSecrets&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;secretsmanager:ListSecrets&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ol start="6">
<li>Make sure the created policy is attached.
<img src="images/cloudwatchrule0.6.png" width="600"/></li>
<li>Now go to the CloudWatch service in your console and select &ldquo;Rules&rdquo; under the &ldquo;Events&rdquo; option on the left side. Click &ldquo;Create rule&rdquo;.
<img src="images/cloudwatchrule1.png" width="800"/></li>
<li>Create a rule with the following configuration (running every 4 hours and running the Lambda function created above):
<img src="images/cloudwatchrule2.png" width="700"/></li>
<li>Name and create the rule.
<img src="images/cloudwatchrule3.png" width="800"/></li>
<li>With the rule enabled, the Slack bot token will be rotated every 4 hours and stored in Secrets Manager.
<img src="images/cloudwatchrule4.png" width="700"/></li>
</ol>
<h2 id="slack-bot-rotation-lambda-function" class="relative group">Slack Bot Rotation Lambda Function <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#slack-bot-rotation-lambda-function" aria-label="Anchor">#</a></span></h2>
<h3 id="slack-bot-rotationpy" class="relative group">slack-bot-rotation.py <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#slack-bot-rotationpy" aria-label="Anchor">#</a></span></h3>
<script src="https://gist.github.com/h0wlsec/c82f58817b7f4a447eee7170ef24bb69.js"></script>
<h2 id="cloudwatch-event-rule-lambda-function" class="relative group">CloudWatch Event Rule Lambda Function <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#cloudwatch-event-rule-lambda-function" aria-label="Anchor">#</a></span></h2>
<h3 id="slack-bot-rotation-triggerpy" class="relative group">slack-bot-rotation-trigger.py <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#slack-bot-rotation-triggerpy" aria-label="Anchor">#</a></span></h3>
<script src="https://gist.github.com/h0wlsec/e1245c27b2a5fdea4244ce61e9b3dccc.js"></script>
<hr>
<p>While this post is an explainer of what I&rsquo;ve learned on the topic, it could be a great demonstration of Cunningham&rsquo;s Law&hellip;</p>
<blockquote>
<p>The best way to get the right answer on the internet is not to ask a question; it&rsquo;s to post the wrong answer.</p>
</blockquote>
<p>Do let me know in the comments if you&rsquo;ve found a better way of managing Slack bot token rotation with server-less infrastructure in AWS.</p>
<hr>
<h2 id="terraform" class="relative group">Terraform <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#terraform" aria-label="Anchor">#</a></span></h2>
<p>If you use Terraform for managing your AWS infrastructure, I have the configuration for mine below. This is everything I went through in the AWS console above, including the required IAM roles/permissions.</p>
<script src="https://gist.github.com/h0wlsec/d5c019a9dfba13312678df87a744b214.js"></script>
<p>Using the above Terraform code, you would use add this object to your tfvars file including your Slack secrets.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">slack_secrets</span> <span class="o">=</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">client_id</span>            <span class="o">=</span> <span class="s2">&#34;XXXXXXXXXX&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">client_secret</span>        <span class="o">=</span> <span class="s2">&#34;XXXXXXXXXX&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">slack_bot_token</span>      <span class="o">=</span> <span class="s2">&#34;xoxb-XXXXXXX&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">refresh_token</span>        <span class="o">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">slack_signing_secret</span> <span class="o">=</span> <span class="s2">&#34;XXXXXXXXXX&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div>
      </div>
    </section>
    <footer class="pt-8 max-w-prose print:hidden">
      
  <div class="flex">
    
      
      
        
        <img
          class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full"
          width="96"
          height="96"
          alt="Zach Howell"
          src="/profile_hucb4c51d81bce14df4cb4a62fe1832aac_483146_192x192_fill_q75_box_smart1.jpg"
        />
      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">
          Author
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Zach Howell
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/h0wlsec"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://linkedin.com/in/zachhowell"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/HachZowell"
          target="_blank"
          aria-label="Twitter"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

  </span>

</a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group" href="/blog/gathering-o365-logs/">
              <span
                class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Hawk - Tooling for Office 365 Log Gathering</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2020-09-14 04:56:50 &#43;0000 UTC">14 September 2020</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group" href="/blog/simple-cli-colorizing-in-go/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Simple CLI Colorizing in Go</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2022-03-21 09:40:30 &#43;0000 UTC">21 March 2022</time>
                  
                </span>
              </span>
              <span
                class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        
          <div
            class="absolute top-[100vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-0"
          >
            <a
              href="#the-top"
              class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5.5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
              aria-label="Scroll to top"
              title="Scroll to top"
            >
              &uarr;
            </a>
          </div>
        
      </main><footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2022
            Zach Howell
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://git.io/hugo-congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    
    
      <div
        class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"
      >
        <button
          id="appearance-switcher"
          class="w-12 h-12 "
          type="button"
          title="Switch to dark appearance"
        >
          <span class="inline dark:hidden">

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>

</span>
          <span class="hidden dark:inline">

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>

</span>
        </button>
      </div>
    
  </div>
  
  
</footer>
<div
  id="search-wrapper"
  class="fixed inset-0 z-50 flex flex-col p-4 sm:p-6 md:p-[10vh] lg:p-[12vh] w-screen h-screen cursor-default bg-neutral-500/50 backdrop-blur-sm dark:bg-neutral-900/50 invisible"
  data-url="https://h0wlsec.github.io/"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg border-neutral-200 top-20 bg-neutral dark:bg-neutral-800 dark:border-neutral-700"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-transparent focus:outline-2"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
